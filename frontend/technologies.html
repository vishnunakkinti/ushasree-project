<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UshaSree Technologies</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    /* Keep your CSS as-is — no changes here unless you want design tweaks */
  </style>
</head>
<body class="tech-page">
  <header class="subpage-header">
    <h1>UshaSree Technologies</h1>
    <p>Innovative IT & Cloud Solutions</p>
  </header>

  <main>
    <section class="content">
      <h2>Our Courses</h2>
      <div class="item-grid">
        <!-- Course cards unchanged -->
        <div class="item-card">
          <img src="images/linux.jpg" alt="Linux">
          <p>Linux</p>
          <div class="price">₹500</div>
          <button onclick="openEnrollForm('Linux')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/azure.jpg" alt="Microsoft Azure">
          <p>Microsoft Azure</p>
          <div class="price">₹14,999</div>
          <button onclick="openEnrollForm('Microsoft Azure')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/aws.jpg" alt="Amazon Web Services">
          <p>Amazon Web Services</p>
          <div class="price">₹14,999</div>
          <button onclick="openEnrollForm('Amazon Web Services')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/kubernetes.jpg" alt="Kubernetes">
          <p>Kubernetes</p>
          <div class="price">₹4,999</div>
          <button onclick="openEnrollForm('Kubernetes')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/docker.jpg" alt="Docker">
          <p>Docker</p>
          <div class="price">₹2,999</div>
          <button onclick="openEnrollForm('Docker')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/terraform.jpg" alt="Terraform">
          <p>Terraform</p>
          <div class="price">₹1,999</div>
          <button onclick="openEnrollForm('Terraform')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/ansible.jpg" alt="Ansible">
          <p>Ansible</p>
          <div class="price">₹1,999</div>
          <button onclick="openEnrollForm('Ansible')">Enroll Now</button>
        </div>
        <div class="item-card">
          <img src="images/python.jpg" alt="Python">
          <p>Python</p>
          <div class="price">₹9,999</div>
          <button onclick="openEnrollForm('Python')">Enroll Now</button>
        </div>
      </div>
      <a class="btn" href="index.html">Back</a>
    </section>
  </main>

  <footer>
    <p>&copy; UshaSree Industries. All Rights Reserved.</p>
  </footer>

  <!-- Enroll Modal -->
  <div id="enrollModal" class="modal">
    <div class="modal-content">
      <div class="close-btn" onclick="closeModal()">✖</div>
      <h2>Enroll in <span id="selectedCourseName"></span></h2>
      <input type="email" id="enrollEmail" placeholder="Enter your email" required>
      <input type="password" id="enrollPassword" placeholder="Enter your password" required>
      <button onclick="submitEnrollment()">Submit</button>
    </div>
  </div>

  <script>
    const backendBaseURL = "http://65.2.9.139:3000";

    // ✅ Replace localStorage check with real session check
    fetch(`${backendBaseURL}/check-session`, {
      method: "GET",
      credentials: "include"
    })
    .then(res => res.json())
    .then(data => {
      if (!data.loggedIn) {
        alert("Please log in to access this page.");
        window.location.href = "index.html";
      }
    })
    .catch(() => {
      alert("Session check failed. Redirecting to login.");
      window.location.href = "index.html";
    });

    let selectedCourse = "";

    function openEnrollForm(courseName) {
      selectedCourse = courseName;
      document.getElementById('selectedCourseName').innerText = courseName;
      document.getElementById('enrollModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('enrollModal').style.display = 'none';
      document.getElementById('enrollEmail').value = '';
      document.getElementById('enrollPassword').value = '';
    }

    function submitEnrollment() {
      const email = document.getElementById('enrollEmail').value.trim();
      const password = document.getElementById('enrollPassword').value.trim();

      if (!email || !password) {
        alert("Please enter email and password.");
        return;
      }

      alert(`Enrolled in ${selectedCourse} successfully!`);
      closeModal();
    }

    window.onclick = function(event) {
      const modal = document.getElementById('enrollModal');
      if (event.target === modal) {
        closeModal();
      }
    }
  </script>
</body>
</html>
